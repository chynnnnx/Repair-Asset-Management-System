@inherits UpdateRoomDialogBase

<link href="css/components/admin/RoomManagement.css" rel="stylesheet" />

<MudDialog Class="edit-room-dialog">
    <TitleContent>
        <div class="dialog-title">
            <MudIcon Icon="@Icons.Material.Filled.MeetingRoom" Size="Size.Medium" Class="mr-3" />
            <MudText Typo="Typo.h6" Class="font-weight-semibold">
                Edit Room
            </MudText>
        </div>
    </TitleContent>

    <DialogContent>
        <div class="dialog-body">
            <MudStack Spacing="3">
                <MudPaper Elevation="1" Class="room-info-paper">
                    <div class="info-header">
                        <MudIcon Icon="@Icons.Material.Filled.Info"
                                 Size="Size.Small"
                                 Class="mr-2 info-icon" />
                        <MudText Typo="Typo.subtitle1" Class="info-title">
                            Room Information
                        </MudText>
                    </div>

                    <MudTextField @bind-Value="room.RoomName"
                                  Label="Room Name"
                                  Variant="Variant.Outlined"
                                  Required="true"
                                  Margin="Margin.Dense"
                                  Class="room-input"
                                  Adornment="Adornment.Start"
                                  AdornmentIcon="@Icons.Material.Filled.MeetingRoom"
                                  HelperText="Enter a unique name for this room"
                                  @ref="roomNameField"
                                  Immediate="true"
                                  OnKeyPress="@( (KeyboardEventArgs e) => { if (e.Key == "Enter") Save(); })" />
                </MudPaper>

                <MudAlert Severity="@GetAlertSeverity()"
                          Variant="Variant.Outlined"
                          Class="room-alert">
                    <div class="d-flex align-center">
                        <MudIcon Icon="@GetStatusIcon()" Size="Size.Small" Class="mr-2 alert-icon" />
                        <MudText Typo="Typo.body2">
                            @GetStatusMessage()
                        </MudText>
                    </div>
                </MudAlert>
            </MudStack>

            <DialogActions>
                <div class="dialog-footer">
                    <MudContainer MaxWidth="MaxWidth.False" Class="no-padding">
                        <MudStack Row Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center" Class="full-width">
                            <div class="d-flex align-center">
                                <MudIcon Icon="@Icons.Material.Filled.Edit" Size="Size.Small" Class="mr-1" Color="Color.Tertiary" />
                                <MudText Typo="Typo.caption" Color="Color.Tertiary">
                                    Original: "@originalName"
                                </MudText>
                            </div>

                            <MudStack Row Spacing="2">
                                <MudButton Variant="Variant.Text"
                                           Color="Color.Default"
                                           OnClick="() => MudDialog.Cancel()"
                                           StartIcon="@Icons.Material.Filled.Close"
                                           Class="no-transform"
                                           Disabled="@isLoading">
                                    Cancel
                                </MudButton>
                                <MudButton Variant="Variant.Filled"
                                           OnClick="Save"
                                           Disabled="@(isLoading || !HasChanges() || string.IsNullOrWhiteSpace(room.RoomName?.Trim()))"
                                           StartIcon="@(isLoading ? Icons.Material.Filled.Loop : Icons.Material.Filled.Save)"
                                           Class="save-button">
                                    @if (isLoading)
                                    {
                                        <MudProgressCircular Size="Size.Small"
                                                             Indeterminate="true"
                                                             Class="mr-2 loader-spinner" />
                                        <span>Saving...</span>
                                    }
                                    else
                                    {
                                        <span>Update Room</span>
                                    }
                                </MudButton>
                            </MudStack>
                        </MudStack>
                    </MudContainer>
                </div>
            </DialogActions>
        </div>
    </DialogContent>
</MudDialog>
